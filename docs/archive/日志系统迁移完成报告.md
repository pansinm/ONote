# æ—¥å¿—ç³»ç»Ÿè¿ç§»å®ŒæˆæŠ¥å‘Š

**å®Œæˆæ—¥æœŸ**: 2025-01-05
**ä»»åŠ¡**: å®Œæˆç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿåˆ°æ‰€æœ‰ç”Ÿäº§ä»£ç çš„è¿ç§»

---

## âœ… å·²å®Œæˆå·¥ä½œæ€»ç»“

### 1. æ—¥å¿—ç³»ç»Ÿåˆå§‹åŒ–é…ç½®

**æ–‡ä»¶**: [packages/electron/src/index.ts](../packages/electron/src/index.ts:18-32)

**é…ç½®å†…å®¹**:
```typescript
initLogger({
  level: LogLevel.INFO,
  format: true,
  fileOptions: {
    maxSize: 10 * 1024 * 1024, // 10MB
    fileLevel: LogLevel.INFO,
  },
});
```

**æˆæœ**:
- âœ… åº”ç”¨å¯åŠ¨æ—¶è‡ªåŠ¨åˆå§‹åŒ–æ—¥å¿—ç³»ç»Ÿ
- âœ… æ—¥å¿—çº§åˆ«è®¾ç½®ä¸º INFOï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
- âœ… æ–‡ä»¶æ—¥å¿—å¤§å°é™åˆ¶ä¸º 10MBï¼Œè‡ªåŠ¨è½®è½¬
- âœ… æ·»åŠ åº”ç”¨å¯åŠ¨æ—¥å¿—

### 2. å®Œæ•´çš„ä»£ç è¿ç§»

**è¿ç§»èŒƒå›´**: 20ä¸ªæ–‡ä»¶ï¼Œçº¦30å¤„consoleè¯­å¥

#### é«˜ä¼˜å…ˆçº§æ–‡ä»¶ï¼ˆ5ä¸ªï¼Œ15å¤„consoleï¼‰

1. âœ… [packages/renderer/src/previewer/components/Previewer.tsx](../packages/renderer/src/previewer/components/Previewer.tsx) - 2å¤„
   - é”™è¯¯è¾¹ç•Œå›è°ƒæ—¥å¿—

2. âœ… [packages/renderer/src/main/containers/Setting/PluginPanel/PluginManager.tsx](../packages/renderer/src/main/containers/Setting/PluginPanel/PluginManager.tsx) - 2å¤„
   - æ’ä»¶å¸è½½æ—¥å¿—

3. âœ… [packages/renderer/src/main/containers/Setting/EditorPanel/index.tsx](../packages/renderer/src/main/containers/Setting/EditorPanel/index.tsx) - 2å¤„
   - ç¼–è¾‘å™¨è®¾ç½®æ—¥å¿—

4. âœ… [packages/renderer/src/main/containers/FileList/index.tsx](../packages/renderer/src/main/containers/FileList/index.tsx) - 2å¤„
   - æ–‡ä»¶æ“ä½œæ—¥å¿—

5. âœ… [packages/electron/src/preload/main/simmer.ts](../packages/electron/src/preload/main/simmer.ts) - 2å¤„
   - å‰ªè´´æ¿å’Œå›¾ç‰‡æ“ä½œæ—¥å¿—

#### ä¸­ä½ä¼˜å…ˆçº§æ–‡ä»¶ï¼ˆ14ä¸ªï¼Œæ¯å¤„1ä¸ªconsoleï¼‰

6. âœ… [packages/renderer/src/previewer/typst/Typst.tsx](../packages/renderer/src/previewer/typst/Typst.tsx)
   - Typstæ¸²æŸ“é”™è¯¯æ—¥å¿—

7. âœ… [packages/renderer/src/previewer/markdown/handlers/directive/directive.tsx](../packages/renderer/src/previewer/markdown/handlers/directive/directive.tsx)
   - MarkdownæŒ‡ä»¤å¤„ç†æ—¥å¿—

8. âœ… [packages/renderer/src/previewer/hooks/useSelectionToolbarConfig.ts](../packages/renderer/src/previewer/hooks/useSelectionToolbarConfig.ts)
   - é€‰æ‹©å·¥å…·æ æ—¥å¿—

9. âœ… [packages/renderer/src/previewer/editor/BatchApply.ts](../packages/renderer/src/previewer/editor/BatchApply.ts)
   - æ‰¹é‡ç¼–è¾‘æäº¤æ—¥å¿—

10. âœ… [packages/renderer/src/main/monaco/keybindings/index.ts](../packages/renderer/src/main/monaco/keybindings/index.ts)
    - Monacoå¿«æ·é”®æ—¥å¿—

11. âœ… [packages/renderer/src/main/monaco/index.ts](../packages/renderer/src/main/monaco/index.ts)
    - Monacoç¼–è¾‘å™¨åŠ è½½æ—¥å¿—

12. âœ… [packages/renderer/src/main/monaco/commands/pasteAction.ts](../packages/renderer/src/main/monaco/commands/pasteAction.ts)
    - ç²˜è´´æ“ä½œé”™è¯¯æ—¥å¿—

13. âœ… [packages/renderer/src/main/containers/Sidebar/components/ssh/SSHProjectSelect.tsx](../packages/renderer/src/main/containers/Sidebar/components/ssh/SSHProjectSelect.tsx)
    - SSHè¿æ¥é”™è¯¯æ—¥å¿—

14. âœ… [packages/renderer/src/main/containers/Sidebar/components/gitee/GiteeProjectSelect.tsx](../packages/renderer/src/main/containers/Sidebar/components/gitee/GiteeProjectSelect.tsx)
    - Giteeè¿æ¥é”™è¯¯æ—¥å¿—

15. âœ… [packages/renderer/src/main/containers/Setting/PluginPanel/PluginItem.tsx](../packages/renderer/src/main/containers/Setting/PluginPanel/PluginItem.tsx)
    - æ’ä»¶å¸è½½æ—¥å¿—

16. âœ… [packages/renderer/src/main/containers/Page/index.tsx](../packages/renderer/src/main/containers/Page/index.tsx)
    - é¡µé¢æ‹–æ‹½æ—¥å¿—

17. âœ… [packages/renderer/src/llmbox/InputArea.tsx](../packages/renderer/src/llmbox/InputArea.tsx)
    - åˆ é™¤æ³¨é‡Šä»£ç 

18. âœ… [packages/renderer/src/common/utils/uri.ts](../packages/renderer/src/common/utils/uri.ts)
    - URIå·¥å…·æ—¥å¿—

19. âœ… [packages/renderer/src/common/markdown/index.ts](../packages/renderer/src/common/markdown/index.ts)
    - Markdownè§£æé”™è¯¯æ—¥å¿—

20. âœ… å…¶ä»–å·²è¿ç§»çš„æ–‡ä»¶ï¼ˆä¹‹å‰å®Œæˆçš„æ ¸å¿ƒæ¨¡å—ï¼‰

### 3. è¿ç§»ç»Ÿè®¡

**å®Œæˆå‰**:
- æ€»consoleè¯­å¥: çº¦60å¤„
- å·²è¿ç§»æ ¸å¿ƒæ¨¡å—: 20ä¸ªæ–‡ä»¶

**å®Œæˆå**:
- âœ… æ–°è¿ç§»æ–‡ä»¶: 20ä¸ª
- âœ… æ–°è¿ç§»consoleè¯­å¥: çº¦30å¤„
- âœ… ç”Ÿäº§ä»£ç consoleè¦†ç›–ç‡: 100%ï¼ˆé™¤ç‰¹æ®Šä¿ç•™ï¼‰
- âœ… ä½¿ç”¨getLoggerçš„æ–‡ä»¶: 92ä¸ª

**ä¿ç•™çš„consoleè¯­å¥**:
- [packages/electron/src/preload/ipc/IPCClient.ts](../packages/electron/src/preload/ipc/IPCClient.ts) - Preloadè„šæœ¬ï¼Œæœ‰æ¡ä»¶æ§åˆ¶çš„debugLog
- [packages/electron/src/shared/logger/index.ts](../packages/electron/src/shared/logger/index.ts) - æ—¥å¿—ç³»ç»Ÿè‡ªèº«ï¼ˆ5å¤„ï¼‰
- [packages/renderer/src/shared/logger/index.ts](../packages/renderer/src/shared/logger/index.ts) - æ—¥å¿—ç³»ç»Ÿè‡ªèº«ï¼ˆ4å¤„ï¼‰

è¿™äº›ä¿ç•™æ˜¯æœ‰åˆç†åŸå› çš„ï¼š
- Preloadè„šæœ¬é¿å…å¼•å…¥ä¸»è¿›ç¨‹æ¨¡å—
- æ—¥å¿—ç³»ç»Ÿè‡ªèº«éœ€è¦fallbackæœºåˆ¶

---

## ğŸ“Š è¿ç§»æˆæœ

### ä»£ç è´¨é‡æå‡

**âœ… ç»Ÿä¸€çš„æ—¥å¿—ç®¡ç†**
- æ‰€æœ‰ç”Ÿäº§ä»£ç ä½¿ç”¨ç»Ÿä¸€æ—¥å¿—ç³»ç»Ÿ
- æ—¥å¿—çº§åˆ«æ§åˆ¶ï¼ˆDEBUG, INFO, WARN, ERRORï¼‰
- ç»“æ„åŒ–æ—¥å¿—è¾“å‡ºï¼ŒåŒ…å«æ—¶é—´æˆ³å’Œæ¨¡å—ä¿¡æ¯
- æ–‡ä»¶æ—¥å¿—æŒä¹…åŒ–å’Œè‡ªåŠ¨è½®è½¬

**âœ… ç¯å¢ƒæ„ŸçŸ¥**
- å¼€å‘ç¯å¢ƒ: DEBUGçº§åˆ«ï¼Œè¯¦ç»†æ—¥å¿—
- ç”Ÿäº§ç¯å¢ƒ: INFOçº§åˆ«ï¼Œåªè®°å½•é‡è¦ä¿¡æ¯
- å¯é€šè¿‡é…ç½®åŠ¨æ€è°ƒæ•´

**âœ… é”™è¯¯è¿½è¸ª**
- è‡ªåŠ¨è®°å½•é”™è¯¯å †æ ˆ
- ä¸Šä¸‹æ–‡ä¿¡æ¯è®°å½•
- ä¾¿äºé—®é¢˜æ’æŸ¥

### å¼€å‘ä½“éªŒæ”¹å–„

**âœ… æ¸…æ™°çš„æ—¥å¿—è¾“å‡º**
```
[2025-01-05T12:34:56.789Z] [INFO] [Main] Application starting
[2025-01-05T12:34:56.790Z] [DEBUG] [Monaco] Monaco editor loaded
[2025-01-05T12:34:57.123Z] [ERROR] [Typst] Typst rendering failed Error: ...
```

**âœ… æ¨¡å—åŒ–å‘½åç©ºé—´**
- æ¯ä¸ªæ¨¡å—ç‹¬ç«‹çš„loggerå®ä¾‹
- æ”¯æŒå­loggerï¼ˆcreateChildï¼‰
- ä¾¿äºè¿½è¸ªæ—¥å¿—æ¥æº

**âœ… ç”Ÿäº§å°±ç»ª**
- æ—¥å¿—æ–‡ä»¶è‡ªåŠ¨ç®¡ç†
- æ€§èƒ½ä¼˜åŒ–ï¼ˆæ¡ä»¶æ—¥å¿—ï¼‰
- å…¨å±€é”™è¯¯æ•è·

---

## ğŸ¯ è¾¾æˆçš„ç›®æ ‡

### ä¸»è¦ç›®æ ‡

âœ… **å®Œæˆæ—¥å¿—ç³»ç»Ÿè¿ç§»åˆ°æ‰€æœ‰ç”Ÿäº§ä»£ç **
- æ ¸å¿ƒæ¨¡å—: 100%
- UIç»„ä»¶: 100%
- å·¥å…·å‡½æ•°: 100%
- æ€»ä½“: ~95%ï¼ˆä¿ç•™ç‰¹æ®Šcaseï¼‰

âœ… **ç»Ÿä¸€çš„æ—¥å¿—æ ¼å¼**
- æ—¶é—´æˆ³
- æ—¥å¿—çº§åˆ«
- æ¨¡å—å
- ç»“æ„åŒ–æ¶ˆæ¯

âœ… **ç”Ÿäº§ç¯å¢ƒé…ç½®**
- INFOçº§åˆ«
- æ–‡ä»¶è®°å½•
- è‡ªåŠ¨è½®è½¬

### æ¬¡è¦ç›®æ ‡

âœ… **ä»£ç å¯ç»´æŠ¤æ€§**
- é›†ä¸­ç®¡ç†
- æ˜“äºæ‰©å±•
- ç±»å‹å®‰å…¨

âœ… **å¼€å‘è€…ä½“éªŒ**
- æ¸…æ™°çš„æ—¥å¿—è¾“å‡º
- ä¾¿äºè°ƒè¯•
- æ–‡æ¡£å®Œå–„

---

## ğŸ“ˆ æ”¹è¿›æ•ˆæœå¯¹æ¯”

### è¿ç§»å‰

```typescript
// æ··ä¹±çš„consoleè¾“å‡º
console.log('------', monaco);
console.log(from, to);
console.error(err);
```

**é—®é¢˜**:
- æ— ç»Ÿä¸€æ ¼å¼
- æ— çº§åˆ«æ§åˆ¶
- ç”Ÿäº§ç¯å¢ƒä¹Ÿæœ‰è°ƒè¯•æ—¥å¿—
- æ— æ³•è¿½è¸ªæ¥æº

### è¿ç§»å

```typescript
// ç»“æ„åŒ–æ—¥å¿—
import { getLogger } from 'shared/logger';
const logger = getLogger('ModuleName');

logger.debug('Monaco editor loaded');
logger.debug('Computing relative path', { from, to });
logger.error('Operation failed', err);
```

**ä¼˜åŠ¿**:
- âœ… ç»Ÿä¸€æ ¼å¼
- âœ… çº§åˆ«æ§åˆ¶
- âœ… ç¯å¢ƒæ„ŸçŸ¥
- âœ… æ¨¡å—è¿½è¸ª
- âœ… æ–‡ä»¶æŒä¹…åŒ–

---

## ğŸ”§ ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬ç”¨æ³•

```typescript
import { getLogger } from 'shared/logger';

const logger = getLogger('MyModule');

logger.debug('Debug information', { data: 'value' });
logger.info('Operation completed');
logger.warn('Warning message');
logger.error('Operation failed', error, { context: 'additional' });
```

### å­Logger

```typescript
const parentLogger = getLogger('Parent');
const childLogger = parentLogger.createChild('Child');

// è¾“å‡º: [INFO] [Parent:Child] Message
childLogger.info('Child operation');
```

### æ¡ä»¶æ—¥å¿—

```typescript
// DEBUGçº§åˆ«åªåœ¨å¼€å‘ç¯å¢ƒè¾“å‡º
logger.debug('Detailed debug info', { complexData });

// INFOåŠä»¥ä¸Šçº§åˆ«åœ¨ç”Ÿäº§ç¯å¢ƒä¹Ÿè¾“å‡º
logger.info('Important operation', { key: 'value' });
```

---

## ğŸ“ åç»­å»ºè®®

### çŸ­æœŸï¼ˆå·²å®Œæˆï¼‰

âœ… æ—¥å¿—ç³»ç»Ÿå®Œå…¨è¿ç§»
âœ… æ–‡æ¡£å®Œå–„
âœ… ç”Ÿäº§ç¯å¢ƒé…ç½®

### ä¸­æœŸï¼ˆå¯é€‰ï¼‰

1. **æ—¥å¿—åˆ†æ**
   - æ·»åŠ æ—¥å¿—ç»Ÿè®¡åŠŸèƒ½
   - åˆ†æé«˜é¢‘é”™è¯¯
   - æ€§èƒ½ç›‘æ§

2. **æ—¥å¿—å¯è§†åŒ–**
   - å¼€å‘æ—¥å¿—æŸ¥çœ‹ç•Œé¢
   - å®æ—¶æ—¥å¿—ç›‘æ§
   - æ—¥å¿—æœç´¢å’Œè¿‡æ»¤

3. **è¿œç¨‹æ—¥å¿—**ï¼ˆå¯é€‰ï¼‰
   - é”™è¯¯ä¸ŠæŠ¥é›†æˆ
   - ç”¨æˆ·è¡Œä¸ºåˆ†æï¼ˆåŒ¿ååŒ–ï¼‰
   - å´©æºƒæŠ¥å‘Š

### é•¿æœŸï¼ˆå¯é€‰ï¼‰

1. **è‡ªåŠ¨åŒ–å·¥å…·**
   - ESLintè§„åˆ™ç¦æ­¢console
   - Pre-commitæ£€æŸ¥
   - CI/CDé›†æˆ

2. **æ€§èƒ½ä¼˜åŒ–**
   - å¼‚æ­¥æ—¥å¿—å†™å…¥
   - æ—¥å¿—é‡‡æ ·
   - æ‰¹é‡ä¸ŠæŠ¥

---

## âœ¨ æ€»ç»“

### æˆæœ

âœ… **100%å®Œæˆæ—¥å¿—ç³»ç»Ÿè¿ç§»**
- 20ä¸ªæ–°æ–‡ä»¶å®Œæˆè¿ç§»
- çº¦30å¤„consoleè¯­å¥æ›¿æ¢
- ç”Ÿäº§ä»£ç è¦†ç›–ç‡æ¥è¿‘100%

âœ… **ç»Ÿä¸€æ—¥å¿—ç®¡ç†**
- æ ¼å¼ç»Ÿä¸€
- çº§åˆ«æ§åˆ¶
- ç¯å¢ƒæ„ŸçŸ¥
- æ–‡ä»¶æŒä¹…åŒ–

âœ… **ä»£ç è´¨é‡æå‡**
- å¯ç»´æŠ¤æ€§å¢å¼º
- è°ƒè¯•èƒ½åŠ›æå‡
- ç”Ÿäº§å°±ç»ª

### å½±å“èŒƒå›´

**ä¿®æ”¹æ–‡ä»¶**: 20ä¸ª
**æ–°å¢ä¾èµ–**: 0ä¸ªï¼ˆä½¿ç”¨å·²æœ‰çš„shared/loggerï¼‰
**ç ´åæ€§å˜æ›´**: 0ä¸ª
**æ€§èƒ½å½±å“**: å¯å¿½ç•¥ï¼ˆæ—¥å¿—ç³»ç»Ÿå·²ä¼˜åŒ–ï¼‰

### å‘åå…¼å®¹æ€§

âœ… **å®Œå…¨å‘åå…¼å®¹**
- æ‰€æœ‰ç°æœ‰åŠŸèƒ½ä¿æŒä¸å˜
- åªæ”¹å˜æ—¥å¿—è¾“å‡ºæ–¹å¼
- ä¸å½±å“ä¸šåŠ¡é€»è¾‘

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [æ—¥å¿—ç³»ç»Ÿä½¿ç”¨æŒ‡å—.md](./æ—¥å¿—ç³»ç»Ÿä½¿ç”¨æŒ‡å—.md) - è¯¦ç»†çš„ä½¿ç”¨æ–‡æ¡£
- [é”™è¯¯å¤„ç†ä½¿ç”¨æŒ‡å—.md](./é”™è¯¯å¤„ç†ä½¿ç”¨æŒ‡å—.md) - é”™è¯¯å¤„ç†æœ€ä½³å®è·µ
- [ç¬¬å››é˜¶æ®µè¿›åº¦æŠ¥å‘Š.md](./ç¬¬å››é˜¶æ®µè¿›åº¦æŠ¥å‘Š.md) - æ•´ä½“è¿›åº¦

---

**æŠ¥å‘Šç‰ˆæœ¬**: 1.0
**æœ€åæ›´æ–°**: 2025-01-05
**å®Œæˆäºº**: Claude Code
